


-----------On these SO, Item is Active & not invoiceable 

SELECT
DISTINCT  
decode(ORGANIZATION_ID,107, 'ACC',128 ,'AC',129,'RC',130, 'VP',131, 'CS',132, 'IP',133, 'SE','not assign') ORG,
 segment1,item_type ,
DECODE(PLANNING_MAKE_BUY_CODE,1,'make',2,'buy')  make_or_buy_by_item,
tv.TEMPLATE_NAME,
DECODE(tav.ATTRIBUTE_VALUE ,1,'make',2,'buy')  make_or_buy_by_template,
msi.INVOICE_ENABLED_FLAG  
FROM apps.MTL_SYSTEM_ITEMS_FVL msi, 
MTL_ITEM_TEMPLATES_ALL_V  tv,
MTL_ITEM_TEMPL_ATTRIBUTES_V tav
WHERE
msi.item_type = (
SELECT ATTRIBUTE_value FROM MTL_ITEM_TEMPL_ATTRIBUTES_V 
WHERE ATTRIBUTE_NAME  = 'MTL_SYSTEM_ITEMS.ITEM_TYPE'
--and TEMPLATE_ID = 101
AND TEMPLATE_ID  =tv.TEMPLATE_ID)  AND 
tav.ATTRIBUTE_NAME = 'MTL_SYSTEM_ITEMS.PLANNING_MAKE_BUY_CODE' AND 
tv.TEMPLATE_ID = tav.TEMPLATE_ID  
--and segment1 = 'KRH 101 335/3.R7A' 
and   ORGANIZATION_ID in(107,128,129,130,131,132,133)
AND  INVENTORY_ITEM_STATUS_CODE  = 'Active'
and (msi.INVOICE_ENABLED_FLAG <> 'Y' or msi.INVOICE_ENABLED_FLAG is null)




-------Check Item Invoiceable/Transactable_flag='N' in Active status 
select segment1,ORGANIZATION_ID,Item_Type,CREATION_DATE,LAST_UPDATE_DATE,
INVOICEABLE_ITEM_FLAG,
INVOICE_ENABLED_FLAG,
MTL_TRANSACTIONS_ENABLED_FLAG,
INVENTORY_ITEM_FLAG,
INVENTORY_ITEM_STATUS_CODE
from apps.mtl_system_items
where ORGANIZATION_ID in (127,130)
and INVENTORY_ITEM_STATUS_CODE='Active'
and MTL_TRANSACTIONS_ENABLED_FLAG='N'




--------Find un-shipped SO, pickable_flag=N'
select a.ORDER_NUMBER,
--c.SOURCE_HEADER_NUMBER,c.SOURCE_LINE_NUMBER line_num,--b.LINE_NUMBER,
c.SOURCE_HEADER_TYPE_NAME SO_Type,
a.FLOW_STATUS_CODE head_status,
b.FLOW_STATUS_CODE line_status,
c.RELEASED_STATUS,
c.PICKABLE_FLAG,
b.ORDERED_ITEM,
b.ORDERED_QUANTITY,b.SHIPPED_QUANTITY,b.CANCELLED_FLAG,b.SCHEDULE_SHIP_DATE
from apps.OE_ORDER_HEADERS_all a,apps.OE_ORDER_lines_all b,apps.wsh_delivery_details c
where a.HEADER_ID=b.HEADER_ID
and a.HEADER_ID=c.SOURCE_HEADER_ID
and b.LINE_ID=c.SOURCE_LINE_ID
and a.ORDER_NUMBER='4428840'
and b.CANCELLED_FLAG<>'N'
and a.FLOW_STATUS_CODE<>'CLOSED'
and b.FLOW_STATUS_CODE in ('AWAITING_SHIPPING','BOOKED')
--and c.OE_INTERFACED_FLAG<>'Y'
and c.INV_INTERFACED_FLAG<>'Y'
and c.PICKABLE_FLAG<>'Y'
and c.RELEASED_STATUS <>'C'

